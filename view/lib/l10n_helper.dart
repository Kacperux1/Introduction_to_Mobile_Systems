import 'package:flutter/material.dart';

class S {
  final Locale locale;
  S(this.locale);

  static S of(BuildContext context) {
    final locale = Localizations.localeOf(context);
    return S(locale);
  }

  static const _translations = {
    'en': {
      'app_title': 'BookTrade',
      'login': 'Log in',
      'register': 'Register',
      'username': 'Username',
      'password': 'Password',
      'email': 'Email',
      'number': 'Phone Number',
      'country': 'Country',
      'city': 'City',
      'no_account': 'Don\'t have an account? Register',
      'buy_books': 'Buy books for your studies',
      'sell_books': 'Sell books you no longer use',
      'reviews': 'Reviews',
      'reviews_lowercase': 'give reviews of books',
      'ai_recommendations': 'AI Book Recommendations',
      'logout': 'Log out',
      'your_account': 'Your Account',
      'faq': 'FAQ',
      'audio_settings': 'Audio settings',
      'language': 'Language',
      'preferences': 'Preferences',
      'search_hint': 'What are you looking for?',
      'list_for_sale': 'List for Sale',
      'save_changes': 'Save Changes',
      'voice_input': 'Voice input',
      'loading': 'Loading',
      'book_details': 'Book Details',
      'title': 'Title',
      'author': 'Author',
      'condition': 'Condition',
      'price': 'Price',
      'buy_now': 'Buy Now',
      'add_review': 'Add Your Review',
      'contact': 'Contact',
      'sold_by': 'Sold by',
      'book_semantics': 'Book: {title} by {author}, condition: {condition}, price: {price} zloty.',
      'view_details': 'View book details',
      'register_title': 'Register',
      'registration_success': 'Registration successful! You can now log in.',
      'registration_failed': 'Registration failed: {error}',
      'required_fields_error': 'Username, password, and email are required.',
      'error_occurred': 'An error occurred: {error}',
      'submit_registration': 'Submit registration',
      'faq_title': 'FAQ',
      'faq_item_label': 'FAQ item: {question}',
      'faq_q1': 'How do I buy a book?',
      'faq_a1': 'Navigate to the "Buy books" screen from the home page, browse the available titles, and click on the "Buy" button for the book you want.',
      'faq_q2': 'Can I sell my old textbooks?',
      'faq_a2': 'Yes! Go to the "Sell books" screen, fill in the details about your book, and it will be listed for other students to buy.',
      'faq_q3': 'How do I change my preferences?',
      'faq_a3': 'Open the right menu on the home screen and select "Preferences" to change the theme, contrast, and other settings.',
      'faq_q4': 'Is my data secure?',
      'faq_a4': 'We take security seriously. Your data is encrypted and handled according to modern safety standards.',
      'no_books_found': 'No books found.',
      'error_loading_books': 'Error loading books: {error}',
      'sell_book_title': 'Sell a Book',
      'book_listed': 'Book listed for sale!',
      'login_required_sell': 'You must be logged in to sell a book.',
      'list_failed': 'Failed to list book. Error: {error}',
      'condition_like_new': 'Like New',
      'condition_very_good': 'Very Good',
      'condition_good': 'Good',
      'condition_acceptable': 'Acceptable',
      'condition_used': 'Visibly Used',
      'enter_field_error': 'Please enter a {field}',
      'review_title': 'Write a Review',
      'review_dialog_title': 'Review "{title}"',
      'your_rating': 'Your Rating:',
      'comment': 'Comment',
      'cancel': 'Cancel',
      'submit': 'Submit',
      'enter_comment_error': 'Please enter a comment',
      'login_required_review': 'You must be logged in to submit a review.',
      'review_submitted': 'Review submitted successfully!',
      'review_failed': 'Failed to submit review. Server responded with: {error}',
      'timeout_error': 'The request timeout. Please try again.',
      'review_button': 'Review',
      'no_books_to_review': 'No books found to review.',
      'not_provided': 'Not provided',
      'no_user_data': 'No user data found.',
      'edit_profile_title': 'Edit Profile',
      'profile_updated': 'Profile updated successfully!',
      'update_failed': 'Update failed: {error}',
      'ai_assistant_title': 'AI Assistant',
      'ai_initial_message': 'Hi! I am your book assistant. Don\'t know what to read? Tell me about your favorite genres and I will find something for you!',
      'ai_hint': 'Write to AI...',
      'view_offer': 'View this offer',
      'user_label': 'You',
      'ai_label': 'AI Assistant',
      'write_to_ai': 'Write to AI assistant',
      'send_message': 'Send message',
      'view_recommended_offer': 'View recommended book offer',
      'no_reviews_yet': 'No reviews yet.',
      'purchase_not_implemented': 'Purchase functionality not implemented yet.',
      'chat_not_implemented': 'Chat functionality will be implemented in the future.',
      'book_not_found': 'Book not found.',
      'failed_load_details': 'Failed to load book details',
      'email_not_available': 'Email not available',
      'book_cover_label': 'Book cover image',
      'chats': 'Chats',
      'no_chats': 'No active chats',
      'login_required_chat': 'You must be logged in to start a chat',
      // Accessibility strings
      'selected': 'selected',
      'tap_to_open_menu': 'Double tap to open menu',
      'tap_to_select': 'Double tap to select',
      'tap_to_view_details': 'Double tap to view book details',
      'tap_to_add_review': 'Double tap to write a review',
      'tap_to_buy': 'Double tap to buy this book',
      'tap_to_contact': 'Double tap to contact seller',
      'tap_to_list': 'Double tap to list book for sale',
      'tap_to_save': 'Double tap to save changes',
      'tap_to_register': 'Double tap to register',
      'tap_to_login': 'Double tap to log in',
      'tap_to_logout': 'Double tap to log out',
      'high_contrast_mode': 'High Contrast Mode',
      'high_contrast_subtitle': 'Enhances visibility with higher contrast colors',
      'theme_mode': 'Theme Mode',
      'theme_default': 'Default',
      'theme_light': 'Light Mode',
      'theme_dark': 'Dark Mode',
      'accessibility_theme_title': 'Accessibility & Theme',
      'settings_not_found': 'Settings not found',
      'logo_label': 'BookTrade Logo',
    },
    'pl': {
      'app_title': 'BookTrade',
      'login': 'Zaloguj się',
      'register': 'Zarejestruj się',
      'username': 'Nazwa użytkownika',
      'password': 'Hasło',
      'email': 'Email',
      'number': 'Numer telefonu',
      'country': 'Kraj',
      'city': 'Miasto',
      'no_account': 'Nie masz konta? Zarejestruj się',
      'buy_books': 'Kup książki na studia',
      'sell_books': 'Sprzedaj nieużywane książki',
      'reviews': 'Recenzje',
      'reviews_lowercase': 'dodaj recenzje książek',
      'ai_recommendations': 'Rekomendacje AI',
      'logout': 'Wyloguj się',
      'your_account': 'Twoje konto',
      'faq': 'Częste pytania',
      'audio_settings': 'Ustawienia dźwięku',
      'language': 'Język',
      'preferences': 'Preferencje',
      'search_hint': 'Czego szukasz?',
      'list_for_sale': 'Wystaw na sprzedaż',
      'save_changes': 'Zapisz zmiany',
      'voice_input': 'Wprowadzanie głosowe',
      'loading': 'Ładowanie',
      'book_details': 'Szczegóły książki',
      'title': 'Tytuł',
      'author': 'Autor',
      'condition': 'Stan',
      'price': 'Cena',
      'buy_now': 'Kup teraz',
      'add_review': 'Dodaj recenzję',
      'contact': 'Kontakt',
      'sold_by': 'Sprzedawca',
      'book_semantics': 'Książka: {title} autorstwa {author}, stan: {condition}, cena: {price} złotych.',
      'view_details': 'Zobacz szczegóły książki',
      'register_title': 'Zarejestruj się',
      'registration_success': 'Rejestracja udana! Możesz się teraz zalogować.',
      'registration_failed': 'Rejestracja nieudana: {error}',
      'required_fields_error': 'Nazwa użytkownika, hasło i email są wymagane.',
      'error_occurred': 'Wystąpił błąd: {error}',
      'submit_registration': 'Wyślij rejestrację',
      'faq_title': 'Częste pytania',
      'faq_item_label': 'Element FAQ: {question}',
      'faq_q1': 'Jak kupić książkę?',
      'faq_a1': 'Przejdź do ekranu "Kup książki" ze strony głównej, przeglądaj dostępne tytuły i kliknij przycisk "Kup" przy wybranej książce.',
      'faq_q2': 'Czy mogę sprzedać swoje stare podręczniki?',
      'faq_a2': 'Tak! Przejdź do ekranu "Sprzedaj książki", wypełnij dane o swojej książce, a zostanie ona wystawiona dla innych studentów.',
      'faq_q3': 'Jak zmienić moje preferencje?',
      'faq_a3': 'Otwórz prawe menu na ekranie głównym i wybierz "Preferencje", aby zmienić motyw, kontrast i inne ustawienia.',
      'faq_q4': 'Czy moje dane są bezpieczne?',
      'faq_a4': 'Traktujemy bezpieczeństwo poważnie. Twoje dane są szyfrowane i przetwarzane zgodnie z nowoczesnymi standardami bezpieczeństwa.',
      'no_books_found': 'Nie znaleziono książek.',
      'error_loading_books': 'Błąd podczas ładowania książek: {error}',
      'sell_book_title': 'Sprzedaj książkę',
      'book_listed': 'Książka wystawiona na sprzedaż!',
      'login_required_sell': 'Musisz być zalogowany, aby sprzedać książkę.',
      'list_failed': 'Nie udało się wystawić książki. Błąd: {error}',
      'condition_like_new': 'Jak nowa',
      'condition_very_good': 'Bardzo dobry',
      'condition_good': 'Dobry',
      'condition_acceptable': 'Dopuszczalny',
      'condition_used': 'Widoczne ślady używania',
      'enter_field_error': 'Proszę podać {field}',
      'review_title': 'Napisz recenzję',
      'review_dialog_title': 'Recenzja "{title}"',
      'your_rating': 'Twoja ocena:',
      'comment': 'Komentarz',
      'cancel': 'Anuluj',
      'submit': 'Wyślij',
      'enter_comment_error': 'Proszę wpisać komentarz',
      'login_required_review': 'Musisz być zalogowany, aby dodać recenzję.',
      'review_submitted': 'Recenzja została pomyślnie dodana!',
      'review_failed': 'Nie udało się dodać recenzji. Serwer odpowiedział: {error}',
      'timeout_error': 'Upłynął czas oczekiwania. Spróbuj ponownie.',
      'review_button': 'Recenzja',
      'no_books_to_review': 'Nie znaleziono książek do recenzji.',
      'not_provided': 'Nie podano',
      'no_user_data': 'Nie znaleziono danych użytkownika.',
      'edit_profile_title': 'Edytuj profil',
      'profile_updated': 'Profil zaktualizowany pomyślnie!',
      'update_failed': 'Aktualizacja nieudana: {error}',
      'ai_assistant_title': 'Asystent AI',
      'ai_initial_message': 'Cześć! Jestem Twoim asystentem książkowym. Nie masz co czytać? Opowiedz mi o swoich ulubionych gatunkach, a znajdę coś dla Ciebie!',
      'ai_hint': 'Napisz do AI...',
      'view_offer': 'Zobacz tę ofertę',
      'user_label': 'Ty',
      'ai_label': 'Asystent AI',
      'write_to_ai': 'Napisz do asystenta AI',
      'send_message': 'Wyślij wiadomość',
      'view_recommended_offer': 'Zobacz polecaną ofertę',
      'no_reviews_yet': 'Brak recenzji.',
      'purchase_not_implemented': 'Funkcjonalność zakupu nie została jeszcze zaimplementowana.',
      'chat_not_implemented': 'Funkcjonalność czatu zostanie zaimplementowana w przyszłości.',
      'book_not_found': 'Książka nie znaleziona.',
      'failed_load_details': 'Nie udało się załadować szczegółów książki',
      'email_not_available': 'Email niedostępny',
      'book_cover_label': 'Okładka książki',
      'chats': 'Czaty',
      'no_chats': 'Brak aktywnych czatów',
      'login_required_chat': 'Musisz być zalogowany, aby rozpocząć czat',
      // Accessibility strings
      'selected': 'wybrany',
      'tap_to_open_menu': 'Dotknij dwukrotnie, aby otworzyć menu',
      'tap_to_select': 'Dotknij dwukrotnie, aby wybrać',
      'tap_to_view_details': 'Dotknij dwukrotnie, aby zobaczyć szczegóły książki',
      'tap_to_add_review': 'Dotknij dwukrotnie, aby napisać recenzję',
      'tap_to_buy': 'Dotknij dwukrotnie, aby kupić tę książkę',
      'tap_to_contact': 'Dotknij dwukrotnie, aby skontaktować się ze sprzedawcą',
      'tap_to_list': 'Dotknij dwukrotnie, aby wystawić książkę na sprzedaż',
      'tap_to_save': 'Dotknij dwukrotnie, aby zapisać zmiany',
      'tap_to_register': 'Dotknij dwukrotnie, aby się zarejestrować',
      'tap_to_login': 'Dotknij dwukrotnie, aby się zalogować',
      'tap_to_logout': 'Dotknij dwukrotnie, aby się wylogować',
      'high_contrast_mode': 'Tryb wysokiego kontrastu',
      'high_contrast_subtitle': 'Poprawia widoczność dzięki kolorom o wyższym kontraście',
      'theme_mode': 'Tryb motywu',
      'theme_default': 'Domyślny',
      'theme_light': 'Tryb jasny',
      'theme_dark': 'Tryb ciemny',
      'accessibility_theme_title': 'Dostępność i Motyw',
      'settings_not_found': 'Nie znaleziono ustawień',
      'logo_label': 'Logo BookTrade',
    }
  };

  String get(String key, {Map<String, String>? args}) {
    String? translation = _translations[locale.languageCode]?[key] ?? _translations['en']?[key];
    if (translation == null) return key; // Safety return
    
    String text = translation;
    if (args != null) {
      args.forEach((k, v) {
        text = text.replaceAll('{$k}', v);
      });
    }
    return text;
  }

  String translateCondition(String condition) {
    switch (condition) {
      case 'Like New':
        return get('condition_like_new');
      case 'Very Good':
        return get('condition_very_good');
      case 'Good':
        return get('condition_good');
      case 'Acceptable':
        return get('condition_acceptable');
      case 'Visibly Used':
        return get('condition_used');
      default:
        return condition;
    }
  }
}
